<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Earn Free Coins</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- ‚ö†Ô∏è YOUR AD SCRIPT HERE -->
    <script src='//libtl.com/sdk.js' data-zone='10525553' data-sdk='show_10525553'></script>

    <style>
        :root {
            --bg: #0f0f0f;
            --card: #1e1e1e;
            --primary: #0088cc;
            --text: #ffffff;
            --accent: #ff9800;
        }
        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: sans-serif;
            text-align: center;
            margin: 0; padding: 20px;
            display: flex; flex-direction: column; height: 100vh;
        }
        .header { margin-bottom: 20px; }
        .balance-box {
            background: linear-gradient(45deg, #0088cc, #005f8f);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 136, 204, 0.4);
            margin-bottom: 30px;
        }
        .balance-box h3 { margin: 0; font-size: 16px; opacity: 0.9; }
        .balance-box h1 { margin: 5px 0 0; font-size: 36px; }

        .task-card {
            background: var(--card);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid #333;
        }
        .btn {
            background: white; color: black;
            border: none; padding: 12px 25px;
            border-radius: 25px; font-weight: bold; font-size: 16px;
            cursor: pointer; width: 100%; display: block;
            margin-top: 10px; transition: 0.2s;
        }
        .btn:active { transform: scale(0.95); background: #ddd; }
        .close-btn {
            margin-top: auto;
            background: transparent; border: 1px solid #444; color: #888;
        }
        #toast {
            visibility: hidden; min-width: 250px; background-color: #333; color: #fff; text-align: center; border-radius: 50px; padding: 16px; position: fixed; z-index: 1; bottom: 30px; left: 50%; transform: translateX(-50%); font-size: 17px;
        }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }
    </style>
</head>
<body>

    <div class="header">
        <h2>üî• Task Center</h2>
    </div>

    <!-- Live Balance Display -->
    <div class="balance-box">
        <h3>Current Balance</h3>
        <h1 id="balanceDisplay">...</h1>
        <small>Coins</small>
    </div>

    <div class="task-card">
        <h3>üì∫ Watch Premium Ad</h3>
        <p>‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶ü‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡ßß‡ß¶ ‡¶ï‡ßü‡ßá‡¶® ‡¶ú‡¶ø‡¶§‡ßá ‡¶®‡¶ø‡¶®‡•§</p>
        <button class="btn" onclick="watchAd()">‚ñ∂ Watch Ad (+10)</button>
    </div>

    <button class="btn close-btn" onclick="window.Telegram.WebApp.close()">‚ùå Close Window</button>

    <div id="toast">‚úÖ +10 Coins Added!</div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        const urlParams = new URLSearchParams(window.location.search);
        const uid = urlParams.get('uid');

        // ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶´‡ßá‡¶ï ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç (‡¶™‡¶∞‡ßá ‡¶†‡¶ø‡¶ï ‡¶π‡¶¨‡ßá)
        document.getElementById('balanceDisplay').innerText = "Loading...";

        function watchAd() {
            if(!uid) return alert("Open from Bot!");

            // ==========================================
            // ‚ö†Ô∏è AD NETWORK INTEGRATION (Simulated)
            // ==========================================
            // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü‡¶ü‡¶ø ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶∂‡ßã ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡¶•‡¶æ‡•§
            // ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶¨ ‡¶Ø‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡ßá‡¶õ‡ßá‡•§
            // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ show_10525553() ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ü‡¶ø ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡¶¨ ‡¶Ø‡¶¶‡¶ø SDK ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡ßá ‡¶•‡¶æ‡¶ï‡ßá‡•§
            
            try {
                if (typeof show_10525553 === 'function') {
                    show_10525553().then(() => {
                        // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶∂‡ßá‡¶∑ ‡¶π‡¶≤‡ßá ‡¶∞‡¶ø‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°
                        giveReward();
                    }).catch(e => {
                        console.log("Ad Error or Closed: ", e);
                        // ‡¶´‡¶≤‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï: ‡¶Ø‡¶¶‡¶ø SDK ‡¶è‡¶∞‡¶∞ ‡¶¶‡ßá‡ßü, ‡¶§‡¶¨‡ßÅ‡¶ì ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∞‡¶ø‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶¨ (‡¶ü‡ßá‡¶∏‡ßç‡¶ü‡¶ø‡¶Ç ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
                        // ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡¶∂‡¶®‡ßá ‡¶è‡¶ü‡¶ø ‡¶Ö‡¶´ ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡•§
                        giveReward();
                    });
                } else {
                    // ‡¶Ø‡¶¶‡¶ø ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶®‡¶æ ‡¶π‡ßü (‡¶∏‡¶ø‡¶Æ‡ßÅ‡¶≤‡ßá‡¶∂‡¶®)
                    alert("Ad Loading... Please wait 3 seconds.");
                    setTimeout(giveReward, 3000);
                }
            } catch (e) {
                // ‡¶∏‡ßá‡¶´‡¶ü‡¶ø
                setTimeout(giveReward, 2000);
            }
        }

        function giveReward() {
            fetch('/api/reward', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ uid: uid })
            })
            .then(res => res.json())
            .then(data => {
                if(data.success) {
                    // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                    document.getElementById('balanceDisplay').innerText = data.newBalance;
                    // ‡¶ü‡ßã‡¶∏‡ßç‡¶ü ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶∂‡ßã
                    const x = document.getElementById("toast");
                    x.className = "show";
                    setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
                }
            });
        }
    </script>
</body>
</html>
